<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" ><head>    <title></title>    <!----------------------------------------------------------------------------->    <!-- JQUERY IMAGE UPLOAD -->    <link id="pu_stylesheet" rel="stylesheet" href="/assets/dist/frontend/cardflow/Jquery.fileupload-ui.css" type='text/css'>    <link id="pu_stylesheet_cards" rel="stylesheet" href="/assets/dist/frontend/cardflow/Jquery.fileupload-ui-new.css" type='text/css' />    <script type="text/javascript" src="/assets/dist/frontend/cardflow/jquery-1.7.2.min.js"></script>    <script type="text/javascript" src="/assets/dist/frontend/cardflow/jquery-ui.js"></script>    <!-- The Templates plugin is included to render the upload/download listings -->    <script src="/assets/dist/frontend/cardflow/tmpl.min.js"></script>    <!-- The Load Image plugin is included for the preview images and image resizing functionality -->    <script src="/assets/dist/frontend/cardflow/load-image.min.js"></script>    <!-- The Canvas to Blob plugin is included for image resizing functionality -->    <script src="/assets/dist/frontend/cardflow/canvas-to-blob.min.js"></script>    <!-- The Iframe Transport is required for browsers without support for XHR file uploads -->    <script src="/assets/dist/frontend/cardflow/jquery.iframe-transport.js"></script>    <!-- The basic File Upload plugin -->    <script src="/assets/dist/frontend/cardflow/jquery.fileupload.js?x=y"></script>    <!-- The File Upload file processing plugin -->    <script src="/assets/dist/frontend/cardflow/jquery.fileupload-fp.js"></script>    <!-- The File Upload user interface plugin -->    <script src="/assets/dist/frontend/cardflow/jquery.fileupload-ui.js"></script>    <!-- The main application script -->    <script src="/assets/dist/frontend/cardflow/main.js?x=y"></script>       <link href='https://fonts.googleapis.com/css?family=Passion+One:400' rel='stylesheet' type='text/css'>      <!----------------------------------------------------------------------------->       </head><body>  <div class="container">    <!-- The file upload form used as target for the file upload widget -->    <form id="fileupload" action="newFlowImageUpload" method="POST" enctype="multipart/form-data">        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->        <div class="row fileupload-buttonbar">            <div class="span7">                <!-- The fileinput-button span is used to style the file input field as button -->                <span class="btn btn-success fileinput-button left">                    <i class="icon-plus icon-white"></i>                    <div class="file_label" style="margin-top: -110px;">Click to upload From Computer</div>                                        <input type="file" name="files" multiple />                </span>                <!--<div class="file_label_processing" style="display:none;"><br /><span style="color:red;">Please wait after uploading as this may take up to 2 minutes</span></div>-->                                <button type="reset" class="btn btn-warning cancel">                    <i class="icon-ban-circle icon-white"></i>                    <span>Cancel upload</span>                </button>                <button type="button" class="btn btn-danger delete">                    <i class="icon-trash icon-white"></i>                    <span>Delete</span>                </button>                <input type="checkbox" class="toggle">                  <input type="hidden" id="barcode" />                <input type="hidden" id="height" />                <input type="hidden" id="width" />                <input type="hidden" id="producttype" />                  <input type="hidden" id="uploadfolder" />                                        </div>        </div>        <!-- The loading indicator is shown during file processing -->        <div class="fileupload-loading"></div>        <!-- Scrollable for table of images to upload -->        <div class="scrollable_table" style="display:none;">            <!-- The table listing the files available for upload/download -->            <table role="presentation" cellpadding="0" cellspacing="0" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>            <!--<div><a href="javascript://" onclick="closeMe()">Close</a></div>-->        </div>    </form></div><script type="text/javascript">$(document).ready(function () {    //alert($(this).parent.);    $.ajax({        type: "POST",        url: "newFlowImageUpload/getUploadData",        data: null,        contentType: "application/json; charset=utf-8",        dataType: "json",        error: function (jqXHR, textStatus) {//alert("getUploadData/error");        },        success: function (msg) {//alert("getUploadData/success");            $("#barcode").val(msg.d.Barcode);            $("#width").val(msg.d.MaxWidth);            $("#height").val(msg.d.MaxHeight);            $("#producttype").val(msg.d.ProductTypeId);            $("#uploadfolder").val(msg.d.UploadFolder);        }    });})</script><!-- The template to display files available for upload --><script id="template-upload" type="text/x-tmpl">{% for (var i=0, file; file=o.files[i]; i++) { %}<tr class="template-upload fade">    <td style="width:20%; height:60px;" class="preview"><span class="fade"></span></td>    <td style="width:60px;" class="name">{%=file.name%}</td>    <!--<td style="display:none"><input type="hidden" name="key" value={%=  "" + $("#uploadfolder").val() + $("#height").val() + "x" + $("#width").val() + "_" + Math.floor((Math.random()* 999999) + 100000) + "_" + $("#barcode").val() + ".jpg" %} required=required /></td>-->    <td style="display:none"><input type="hidden" name="key" value={%=  "" + $("#uploadfolder").val() + Math.round(new Date().getTime()/1000) + "_" + Math.floor((Math.random()* 999999) + 100000) + "_" + $("#barcode").val() + ".jpg" %} required=required /></td>    <td style="display:none"><input type="hidden" name="acl" value="public-read" required=required /></td>    <td class="size" width="20%"><span>{%=o.formatFileSize(file.size)%}</span></td>    {% if (file.error) { %}        <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>    {% } else if (o.files.valid && !i) { %}        <td style="width:76%;" class="control_progress_bar">            <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>        </td>        <td class="start" style="width:70px; display:none; text-align:center;" colspan="2">{% if (!o.options.autoUpload) { %}            <button class="btn btn-primary" style="display:none;">                <i class="icon-upload icon-white"></i>                <span>Upload</span>            </button>        {% } %}</td>    {% } else { %}        <td width="130px">Image Uploaded</td>    {% } %}</tr>{% } %}</script><!-- The template to display files available for download --><script id="template-download" type="text/x-tmpl">{% for (var i=0, file; file=o.files[i]; i++) { %}<tr class="template-download fade">    {% if (file.error) { %}        <td style="width:60px; height:60px;">&nbsp;</td>        <td style="width:60px;" class="name">{%=file.name%}</td>        <td class="size" width="80px"><span>{%=o.formatFileSize(file.size)%}</span></td>        <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>    {% } else { %}        <td style="width:60px; height:60px" class="preview">{% if (file.thumbnail_url) { %}            <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>        {% } %}</td>        <td style="width:60px;" class="name">            &nbsp;<a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>        </td>        <td class="size" width="80px"><span>{%=o.formatFileSize(file.size)%}</span></td>        <td style="width:190px;" colspan="2">Image Uploaded</td>    {% } %}    <td class="delete" style="width:70px;display:none; text-align:center;">        <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">            <i class="icon-trash icon-white"></i>            <span>Delete</span>        </button>    </td>    <!--<td>        <input type="checkbox" name="delete" value="1">    </td>--></tr>{% } %}</script><script type="text/javascript">    $('.fileinput-button input').click(function(){        //== DETECT LANDSCAPE CARD ==/        var iframe_side = $('.container').width();        if ( iframe_side == 324 ) {            $('.container').addClass('landscape');        }        $('.scrollable_table').show();        IntervalCheckUpload();    });          // HIDE THE FILE UPLOAD PANEL WHEN UPLOADING COMPLETE    function IntervalCheckUpload() {                setInterval(function(){            if( $('table.table tr').length ){                // do nothing as upload is in progress                $('.scrollable_table').show();            } else {                $('.scrollable_table').hide();            }        }, 2000);                var in_id_2 = setInterval(function(){            if($('table.table tbody').html().length) {                $('table.table tbody').html('');                clearInterval(in_id_2);            }        }, 6000);    }    $(document).ready(function () {        var ua = navigator.userAgent;        var checker = {           android: ua.match(/Android/),           iphone: ua.match(/iPhone/)        };                if (checker.android){            $('#pu_stylesheet').attr('href','../App_Themes/Styles/ProductEditors/jquery.fileupload-ui-android.css');        } // end UA detection        else if (checker.iphone) {            $('.scrollable_table').addClass('mobile_version_bg');        }        // if landscape editor        if (window.parent.$('#main_wrapper').hasClass("ls_editor")) {            $(".fileinput-button").css("background-position", "center 25px").css("background-size", "13%");            $(".file_label").css("line-height", "14em");        }        // condition to identify if facebook photo upload is available        if ( window.parent.$('#MM_test_fb').val() == '1') {            $(".fileinput-button").css("background", "url(/assets/dist/images/bg_computer.png) center 25px no-repeat").css("background-size", "18%");            $(".file_label").css("line-height", "14em");        }        //EDITOR URL        var CurrentURL = (window.location != window.parent.location)            ? document.referrer            : document.location.href;                if (CurrentURL.indexOf('home/personal') > -1 || CurrentURL.indexOf('customisemug.aspx') > -1) {            $('.fileinput-button').addClass('mug');            $('body').addClass('mug');        }        if (CurrentURL.indexOf('CustomiseCanvas.aspx') > -1 || CurrentURL.indexOf('customisecanvas.aspx') > -1) {            $('body').addClass('canvas');        }        if (CurrentURL.indexOf('CustomisePoster.aspx') > -1 || CurrentURL.indexOf('customiseposter.aspx') > -1) {            $('body').addClass('poster');        }        if (CurrentURL.indexOf('CustomiseMoneyBox.aspx' || CurrentURL.indexOf('customisemoneybox.aspx') > -1) > -1) {            $('body').addClass('moneybox');        }    });    function closeMe() {        $('table.table tbody').html('');        $(".scrollable_table").hide();    }    function showProcessing() {        $('.scrollable_table').show();        //$(".fileinput-button").hide();        //$(".file_label_processing").show();    }    function hideProcessing() {        $('.scrollable_table').hide();        //$(".file_label_processing").hide();        //$(".fileinput-button").show();    }</script></body></html>      